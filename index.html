<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beauty Goddess Pageant</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #4b0082, #8a2be2);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            text-align: center;
        }
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5em;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        .subtitle {
            font-size: 1.2em;
            color: #f0e68c;
            margin-bottom: 30px;
        }
        .contestant {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(5px);
            transition: transform 0.3s ease;
        }
        .contestant:hover {
            transform: scale(1.02);
        }
        .contestant img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            border: 3px solid #ffd700;
            transition: transform 0.3s ease;
        }
        .contestant img:hover {
            transform: scale(1.05);
        }
        .contestant-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em;
            color: #ffd700;
            margin: 10px 0;
        }
        .vote-count {
            font-size: 1.3em;
            color: #f0e68c;
            margin: 10px 0;
        }
        .vote-button {
            background: #ffd700;
            color: #4b0082;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: background 0.3s ease, transform 0.2s ease;
        }
        .vote-button:hover {
            background: #ffec8b;
            transform: translateY(-2px);
        }
        .vote-button:disabled {
            background: #ccc;
            color: #666;
            cursor: not-allowed;
        }
        .vote-checkbox {
            transform: scale(1.5);
            margin: 10px;
            accent-color: #ffd700;
        }
        .message {
            margin-top: 20px;
            color: #ff4500;
            font-weight: 600;
            display: none;
        }
        .sign-in-message {
            margin-top: 10px;
            color: #f0e68c;
            font-size: 1em;
        }
        .sponsor {
            font-size: 1.1em;
            color: #fff;
            margin-top: 30px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        @keyframes glow {
            from {
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            }
            to {
                text-shadow: 0 0 20px rgba(255, 215, 0, 1);
            }
        }
        @media (max-width: 600px) {
            h1 {
                font-size: 2.5em;
            }
            .contestant {
                padding: 15px;
            }
            .contestant img {
                max-width: 80%;
            }
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <h1>Beauty Goddess Pageant</h1>
        <p class="subtitle">Hosted at Tennessee State University</p>
        <div class="contestant">
            <img src="https://via.placeholder.com/300x400?text=Contestant+1" alt="Contestant 1">
            <p class="contestant-name">Contestant 1</p>
            <p class="vote-count">Current Votes: <span id="vote-count">781</span></p>
            <input type="checkbox" id="vote-checkbox" class="vote-checkbox" onchange="toggleVoteButton()">
            <button class="vote-button" id="vote-button" disabled>Cast Your Vote</button>
            <p class="sign-in-message" id="sign-in-message" style="display: none;">Please sign in with Google to finalize your vote.</p>
            <p class="message" id="message"></p>
        </div>
        <p class="sponsor">Proudly Sponsored by Luxoft</p>
    </div>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let user = null;

        // Toggle vote button based on checkbox
        function toggleVoteButton() {
            const checkbox = document.getElementById('vote-checkbox');
            const voteButton = document.getElementById('vote-button');
            const signInMessage = document.getElementById('sign-in-message');
            if (checkbox.checked) {
                voteButton.disabled = false;
                if (!user) {
                    signInMessage.style.display = 'block';
                }
            } else {
                voteButton.disabled = true;
                signInMessage.style.display = 'none';
            }
        }

        // Handle Google Sign-In
        document.getElementById('vote-button').addEventListener('click', () => {
            if (!user) {
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider)
                    .then((result) => {
                        user = result.user;
                        checkAndSubmitVote();
                    })
                    .catch((error) => {
                        document.getElementById('message').style.display = 'block';
                        document.getElementById('message').textContent = 'Error signing in: ' + error.message;
                    });
            } else {
                checkAndSubmitVote();
            }
        });

        // Check if user has already voted and submit vote
        function checkAndSubmitVote() {
            if (!user) return;
            const userId = user.uid;
            db.collection('votes').doc(userId).get()
                .then((doc) => {
                    if (doc.exists) {
                        document.getElementById('message').style.display = 'block';
                        document.getElementById('message').textContent = 'You have already voted!';
                    } else {
                        db.collection('votes').doc(userId).set({
                            voted: true,
                            contestant: 'Contestant 1',
                            timestamp: firebase.firestore.FieldValue.serverTimestamp()
                        }).then(() => {
                            const voteCountElement = document.getElementById('vote-count');
                            let currentVotes = parseInt(voteCountElement.textContent);
                            voteCountElement.textContent = currentVotes + 1;
                            document.getElementById('message').style.display = 'block';
                            document.getElementById('message').textContent = 'Vote submitted successfully!';
                            document.getElementById('vote-checkbox').checked = false;
                            document.getElementById('vote-button').disabled = true;
                            document.getElementById('sign-in-message').style.display = 'none';
                        }).catch((error) => {
                            document.getElementById('message').style.display = 'block';
                            document.getElementById('message').textContent = 'Error submitting vote: ' + error.message;
                        });
                    }
                });
        }

        // Monitor auth state
        auth.onAuthStateChanged((currentUser) => {
            user = currentUser;
            if (user) {
                document.getElementById('sign-in-message').textContent = `Signed in as ${user.displayName}`;
                document.getElementById('vote-checkbox').checked ? document.getElementById('sign-in-message').style.display = 'block' : null;
            } else {
                document.getElementById('sign-in-message').textContent = 'Please sign in with Google to finalize your vote.';
            }
        });
    </script>
</body>
</html>
